resources:
  jobs:
    kedro_project_iris:
      name: kedro_project_iris
      max_concurrent_runs: 1
      job_clusters:
      - job_cluster_key: default
        new_cluster:
          node_type_id: Standard_D4ds_v4
          num_workers: 1
          spark_env_vars:
            KEDRO_LOGGING_CONFIG: /dbfs/FileStore/kedro_project/conf/logging.yml
          spark_version: 14.3.x-scala2.12
      tasks:
      - task_key: split
        job_cluster_key: default
        python_wheel_task:
          entry_point: databricks_run
          package_name: kedro_project
          parameters:
          - --nodes
          - split
          - --conf-source
          - /dbfs/FileStore/kedro_project/conf
          - --package-name
          - kedro_project
        libraries:
        - whl: ../dist/*.whl
      - task_key: make_predictions
        job_cluster_key: default
        depends_on:
        - task_key: split
        python_wheel_task:
          entry_point: databricks_run
          package_name: kedro_project
          parameters:
          - --nodes
          - make_predictions
          - --conf-source
          - /dbfs/FileStore/kedro_project/conf
          - --package-name
          - kedro_project
        libraries:
        - whl: ../dist/*.whl
      - task_key: report_accuracy
        job_cluster_key: default
        depends_on:
        - task_key: make_predictions
        - task_key: split
        python_wheel_task:
          entry_point: databricks_run
          package_name: kedro_project
          parameters:
          - --nodes
          - report_accuracy
          - --conf-source
          - /dbfs/FileStore/kedro_project/conf
          - --package-name
          - kedro_project
        libraries:
        - whl: ../dist/*.whl
      format: MULTI_TASK
      queue:
        enabled: true
